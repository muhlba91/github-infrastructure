---
# required repository settings
name: repository
description: description

# optional repository settings
manageLifecycle: true # whether to manage the repository's entire lifecycle, or just the configuration
visibility: public
protected: false # protection ensures this repository cannot be deleted; if it were, it will be archived
topics: []
homepage: ''

# optional repository features
enableDiscussions: false
enableWiki: false
createProject: false
pagesBranch: main

# optional branch protections/rulesets
rulesets:
  branch:
    enabled: false # required value!
    patterns: [] # github/index/DEFAULT_BRANCH_RULESET_PATTERNS are always protected
    restrictCreation: true
    allowForcePush: false
    requireConversationResolution: true
    requireSignedCommits: false
    requireCodeOwnerReview: false
    approvingReviewCount: 0
    requireLastPushApproval: true
    requireUpdatedBranchBeforeMerge: true
    enableMergeQueue: false
    requiredChecks: [] # list of check names
    allowBypass: true
    allowBypassIntegrations: [] # list of integration ids
    enableGitstreamIntegration: true # enables gitStream integration on the branch
    enableWipIntegration: true # enables WIP integration on the branch
  tag:
    enabled: false # required value!
    patterns: [] # github/index/DEFAULT_TAG_RULESET_PATTERNS are always protected
    restrictCreation: true
    allowForcePush: false
    requireConversationResolution: true
    requireSignedCommits: false
    requireCodeOwnerReview: false
    approvingReviewCount: 0
    requireLastPushApproval: true
    requireUpdatedBranchBeforeMerge: true
    requiredChecks: [] # list of check names
    allowBypass: true
    allowBypassIntegrations: [] # list of integration ids

# optional cloud access permissions to setup
# if using Vault, a GitHub Actions secret is created with the Vault role name for JWT authentication
accessPermissions:
  gitlab:
    group: '' # the GitLab group ID or full path to create the access token for
    scopes: [] # list of GitLab scopes to create an access token with
  vault:
    enabled: true # creates Vault secrets
    address: '' # the Vault address (optional)
    additionalMounts: # list of additional mounts to provide access to
      - path: '' # the path to the secret mount
        permissions: # list of additional permissions for the secret mount
          - read
          - list
  tailscale: true # sets the Tailscale OAuth secrets
  google:
    region: europe-west4 # if not set, google.defaultRegion is used
    project: '' # the default project
    hmacKey: false # create Cloud Storage HMAC keys in the default project
    linkedProjects: # a map of linked project ids with the access configuration
      project-id:
        accessLevel: default # 'default' OR 'full'; full uses 'iamPermissions' to set
        iamPermissions: [] # list of additional permissions for the service account
    iamPermissions: [] # list of additional permissions for the service account; pkg/lib/google/defaults/defaultPermissions are default permissions
    enabledServices: [] # list of additional services to enable in the project(s); pkg/lib/google/defaults/defaultServices are the default services
  aws:
    region: eu-west-1 # if not set, aws.defaultRegion is used
    account: 0 # the default account id
    iamPermissions: [] # list of additional permission for the service account; pkg/lib/aws/defaults/defaultPermissions are the default permissions
  scaleway:
    organizationId: '' # if not set, scaleway.organizationId is used
    region: fr-par # if not set, scaleway.defaultRegion is used
    zone: fr-par-1 # if not set, scaleway.defaultZone is used
    project: '' # the default project name
    linkedProjects: # a map of linked project ids with the access configuration
      project-name:
        accessLevel: default # 'default' OR 'full'; full uses 'iamPermissions' to set
        iamPermissions: [] # list of additional permissions for the application
    iamPermissions: [] # list of additional permission for the application; pkg/lib/scaleway/defaults/defaultProjectPermissions are the default permissions
